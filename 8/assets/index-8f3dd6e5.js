(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function c(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=c(n);fetch(n.href,o)}})();const a=(e,t)=>{e=Math.abs(e),t=Math.abs(t);const c=Math.ceil(Math.min(e,t)),r=Math.floor(Math.max(e,t)),n=Math.random()*(r-c+1)+c;return Math.floor(n)},u=e=>e[a(0,e.length-1)],_=()=>{let e=0;return()=>(e+=1,e)},E=e=>e.key==="Escape",g=e=>document.getElementById(e).content.firstElementChild,M=5,S=g("comment"),m=document.querySelector(".social__comments"),p=document.querySelector(".social__comment-count"),d=document.querySelector(".comments-loader");let l=[];p.classList.remove("hidden");const L=e=>{const t=S.cloneNode(!0);t.querySelector(".social__picture").src=e.avatar,t.querySelector(".social__text").textContent=e.message,m.append(t)},I=()=>{const e=m.children.length;let t=e+M;const c=t>=l.length;t=c?l.length:t;const r=l.slice(e,t),n=document.createDocumentFragment();for(const o of r)n.appendChild(L(o));m.appendChild(n),p.textContent=`${t} из ${l.length} комментариев`,d.hidden=c};d.addEventListener("click",I);const N=e=>{l=e,d.click()},T=()=>{m.innerHTML="",l=[]},b=document.body,i=document.querySelector(".big-picture"),q=i.querySelector(".cancel"),O=({url:e,description:t,likes:c})=>{i.querySelector(".big-picture__img").querySelector("img").src=e,i.querySelector(".social__caption").textContent=t,i.querySelector(".likes-count").textContent=c},P=e=>{E(e)&&(e.preventDefault(),f())},h=(e=!0)=>{i.classList.toggle("hidden",!e),b.classList.toggle("modal-open",e)};function f(){h(!1),T()}q.addEventListener("click",()=>f());const v=e=>{h(!0),document.addEventListener("keydown",P),O(e),N(e.comments)},A=25,x=6,w=15,D=200,U=20,k=["Всё отлично!","В целом всё неплохо. Но не всё.","Когда вы делаете фотографию, хорошо бы убирать палец из кадра. В конце концов это просто непрофессионально.","Моя бабушка случайно чихнула с фотоаппаратом в руках и у неё получилась фотография лучше.","Я поскользнулся на банановой кожуре и уронил фотоаппарат на кота и у меня получилась фотография лучше.","Лица у людей на фотке перекошены, как будто их избивают. Как можно было поймать такой неудачный момент?!"],K=["Пляж","Указатель показывает, направление до пляжа","Скалистый берег","Девушка на пляже с фотоаппаратом","Забавный мисо суп с человечками из риса","Японский автомобиль с открытой ламба дверью","На деревянной тарелке клубника разрезанная на две половики","Две прозрачные чашки с горячим напитком из красной смородины"],R=["Мария","Алексей","Артур","Виктор","Александр","Мариса","Мирон","Анна"],$=_(),F=()=>Array.from({length:a(1,2)},()=>u(k)).join(" "),B=()=>({id:$(),avatar:`img/avatar-${a(1,x)}.svg`,message:F(),name:u(R)}),j=e=>({id:e,url:`photos/${e}.jpg`,description:u(K),likes:a(w,D),comments:Array.from({length:a(4,U)},B)}),y=()=>Array.from({length:A},(e,t)=>j(t+1));y();const C=y(),G=e=>C.find(t=>t.id===e),z=g("picture"),H=document.querySelector(".pictures"),V=e=>{e.preventDefault();const c=+e.currentTarget.dataset.thumbnailId,r=G(c);v(r)},X=({comments:e,description:t,likes:c,url:r,id:n})=>{const o=z.cloneNode(!0),s=o.querySelector(".picture__img");return s.src=r,s.alt=t,o.querySelector(".picture__comments").textContent=e.length,o.querySelector(".picture__likes").textContent=c,o.dataset.thumbnailId=n,o},Z=e=>{const t=document.createDocumentFragment();e.forEach(c=>{const r=X(c);r.addEventListener("click",V),t.append(r)}),H.append(t)};Z(C);
