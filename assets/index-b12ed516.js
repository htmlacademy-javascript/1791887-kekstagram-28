(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(n){if(n.ep)return;n.ep=!0;const c=o(n);fetch(n.href,c)}})();const i=(e,t)=>{e=Math.abs(e),t=Math.abs(t);const o=Math.ceil(Math.min(e,t)),r=Math.floor(Math.max(e,t)),n=Math.random()*(r-o+1)+o;return Math.floor(n)},m=e=>e[i(0,e.length-1)],_=()=>{let e=0;return()=>(e+=1,e)},g=(e,t,o)=>{const r=document.createDocumentFragment();for(const n of t)r.append(o(n));e.append(r)},S=({key:e})=>e==="Escape",p=e=>document.getElementById(e).content.firstElementChild,E=5,M=p("comment"),u=document.querySelector(".social__comments"),T=document.querySelector(".social__comment-count"),d=document.querySelector(".social__comments-loader");let a=[];const b=e=>{const t=M.cloneNode(!0);return t.querySelector(".social__picture").src=e.avatar,t.querySelector(".social__text").textContent=e.message,t},I=()=>{const e=a.length,t=u.children.length;let o=t+E;const r=o>=e;o=r?e:o;const n=a.slice(t,o);g(u,n,b),T.textContent=`${o} из ${e} комментариев`,d.hidden=r};d.addEventListener("click",I);const L=e=>{a=e,d.click()},N=()=>{u.innerHTML="",a=[]},q=document.body,l=document.querySelector(".big-picture"),O=l.querySelector(".cancel"),P=({url:e,description:t,likes:o})=>{l.querySelector(".big-picture__img").querySelector("img").src=e,l.querySelector(".social__caption").textContent=t,l.querySelector(".likes-count").textContent=o},A=e=>{S(e)&&(e.preventDefault(),f())},h=(e=!0)=>{l.classList.toggle("hidden",!e),q.classList.toggle("modal-open",e)};function f(){h(!1),N()}O.addEventListener("click",()=>f());const v=e=>{h(!0),document.addEventListener("keydown",A),P(e),L(e.comments)},x=25,w=6,U=15,k=200,D=20,K=["Всё отлично!","В целом всё неплохо. Но не всё.","Когда вы делаете фотографию, хорошо бы убирать палец из кадра. В конце концов это просто непрофессионально.","Моя бабушка случайно чихнула с фотоаппаратом в руках и у неё получилась фотография лучше.","Я поскользнулся на банановой кожуре и уронил фотоаппарат на кота и у меня получилась фотография лучше.","Лица у людей на фотке перекошены, как будто их избивают. Как можно было поймать такой неудачный момент?!"],R=["Пляж","Указатель показывает, направление до пляжа","Скалистый берег","Девушка на пляже с фотоаппаратом","Забавный мисо суп с человечками из риса","Японский автомобиль с открытой ламба дверью","На деревянной тарелке клубника разрезанная на две половики","Две прозрачные чашки с горячим напитком из красной смородины"],$=["Мария","Алексей","Артур","Виктор","Александр","Мариса","Мирон","Анна"],B=_(),F=()=>Array.from({length:i(1,2)},()=>m(K)).join(" "),j=()=>({id:B(),avatar:`img/avatar-${i(1,w)}.svg`,message:F(),name:m($)}),G=e=>({id:e,url:`photos/${e}.jpg`,description:m(R),likes:i(U,k),comments:Array.from({length:i(4,D)},j)}),y=()=>Array.from({length:x},(e,t)=>G(t+1));y();const C=y(),z=e=>C.find(t=>t.id===e),H=p("picture"),V=document.querySelector(".pictures"),X=e=>{e.preventDefault();const o=+e.currentTarget.dataset.thumbnailId,r=z(o);v(r)},Z=({comments:e,description:t,likes:o,url:r,id:n})=>{const c=H.cloneNode(!0),s=c.querySelector(".picture__img");return s.src=r,s.alt=t,c.querySelector(".picture__comments").textContent=e.length,c.querySelector(".picture__likes").textContent=o,c.dataset.thumbnailId=n,c},J=e=>{const t=Z(e);return t.addEventListener("click",X),t},Q=e=>g(V,e,J);Q(C);
