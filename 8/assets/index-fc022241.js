(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const i=(e,t)=>{e=Math.abs(e),t=Math.abs(t);const r=Math.ceil(Math.min(e,t)),c=Math.floor(Math.max(e,t)),n=Math.random()*(c-r+1)+r;return Math.floor(n)},l=e=>e[i(0,e.length-1)],y=()=>{let e=0;return()=>(e+=1,e)},C=e=>e.key==="Escape",m=e=>document.getElementById(e).contentEditable.firstElementChild,_=m("comment"),u=document.querySelector(".social__comments"),d=document.querySelector(".social__comment-count"),E=document.querySelector(".comments-loader");d.classList.remove("hidden");E.classList.remove("hidden");const M=e=>{const t=_.cloneNode(!0);t.querySelector(".social__picture").src=e.avatar,t.querySelector(".social__text").textContent=e.message,u.append(t)},S=(e,t)=>{d.textContent=`${e} из ${t} комментариев`},L=e=>{u.innerHTML="",e.forEach(M),S(e.length,e.length)},b=()=>{u.innerHTML=""},I=document.body,a=document.querySelector(".big-picture"),T=a.querySelector(".cancel"),q=({url:e,description:t,likes:r})=>{a.querySelector(".big-picture__img").querySelector("img").src=e,a.querySelector(".social__caption").textContent=t,a.querySelector(".likes-count").textContent=r},N=e=>{C(e)&&(e.preventDefault(),p())},g=(e=!0)=>{a.classList.toggle("hidden",!e),I.classList.toggle("modal-open",e)};function p(){g(!1),b()}T.addEventListener("click",()=>p());const O=e=>{g(!0),document.addEventListener("keydown",N),q(e),L(e.comments)},P=25,v=6,A=15,x=200,U=20,D=["Всё отлично!","В целом всё неплохо. Но не всё.","Когда вы делаете фотографию, хорошо бы убирать палец из кадра. В конце концов это просто непрофессионально.","Моя бабушка случайно чихнула с фотоаппаратом в руках и у неё получилась фотография лучше.","Я поскользнулся на банановой кожуре и уронил фотоаппарат на кота и у меня получилась фотография лучше.","Лица у людей на фотке перекошены, как будто их избивают. Как можно было поймать такой неудачный момент?!"],w=["Пляж","Указатель показывает, направление до пляжа","Скалистый берег","Девушка на пляже с фотоаппаратом","Забавный мисо суп с человечками из риса","Японский автомобиль с открытой ламба дверью","На деревянной тарелке клубника разрезанная на две половики","Две прозрачные чашки с горячим напитком из красной смородины"],K=["Мария","Алексей","Артур","Виктор","Александр","Мариса","Мирон","Анна"],R=y(),$=()=>Array.from({length:i(1,2)},()=>l(D)).join(" "),k=()=>({id:R(),avatar:`img/avatar-${i(1,v)}.svg`,message:$(),name:l(K)}),j=e=>({id:e,url:`photos/${e}.jpg`,description:l(w),likes:i(A,x),comments:Array.from({length:i(0,U)},k)}),h=()=>Array.from({length:P},(e,t)=>j(t+1));h();const f=h(),B=e=>f.find(t=>t.id===e),F=m("picture"),G=document.querySelector(".pictures"),H=e=>{e.preventDefault();const r=+e.currentTarget.dataset.thumbnailId,c=B(r);O(c)},z=({comments:e,description:t,likes:r,url:c,id:n})=>{const o=F.cloneNode(!0),s=o.querySelector(".picture__img");return s.src=c,s.alt=t,o.querySelector(".picture__comments").textContent=e.length,o.querySelector(".picture__likes").textContent=r,o.dataset.thumbnailId=n,o},V=e=>{const t=document.createDocumentFragment();e.forEach(r=>{const c=z(r);c.addEventListener("click",H),t.append(c)}),G.append(t)};V(f);
